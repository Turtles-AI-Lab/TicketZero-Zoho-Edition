<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>TicketZero AI - Setup Wizard</title>
    <style>
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .wizard-container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 90%;
            overflow: hidden;
        }
        .wizard-header {
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 24px;
            text-align: center;
        }
        .wizard-content {
            padding: 32px;
        }
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 32px;
            padding: 0 20px;
        }
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            position: relative;
        }
        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #e5e7eb;
            color: #6b7280;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 8px;
            transition: all 0.3s;
        }
        .step.active .step-number {
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .step.completed .step-number {
            background: #10b981;
            color: white;
        }
        .step-title {
            font-size: 12px;
            color: #6b7280;
            text-align: center;
        }
        .step.active .step-title {
            color: #374151;
            font-weight: 600;
        }
        .step-content {
            min-height: 300px;
            display: none;
        }
        .step-content.active {
            display: block;
        }
        .form-group {
            margin-bottom: 24px;
        }
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
        }
        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.2s;
            box-sizing: border-box;
        }
        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }
        .form-checkbox {
            margin-right: 8px;
        }
        .form-help {
            font-size: 14px;
            color: #6b7280;
            margin-top: 4px;
        }
        .wizard-actions {
            display: flex;
            justify-content: space-between;
            padding-top: 24px;
            border-top: 1px solid #e5e7eb;
            margin-top: 32px;
        }
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }
        .btn-primary {
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        .btn-secondary {
            background: #f3f4f6;
            color: #374151;
        }
        .btn-secondary:hover {
            background: #e5e7eb;
        }
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        .status-check {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
        }
        .status-success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #10b981;
        }
        .status-warning {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #f59e0b;
        }
        .status-error {
            background: #fecaca;
            color: #991b1b;
            border: 1px solid #ef4444;
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin: 24px 0;
        }
        .feature-card {
            padding: 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            text-align: center;
            transition: all 0.2s;
        }
        .feature-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }
        .feature-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin: 16px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }
        .provider-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin: 24px 0;
        }
        .provider-card {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
            position: relative;
        }
        .provider-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }
        .provider-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #f0f4ff 0%, #e0f0ff 100%);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }
        .provider-card.recommended {
            border-color: #10b981;
            background: linear-gradient(135deg, #f0fdf4 0%, #e0f7ed 100%);
        }
        .provider-card.recommended:hover {
            border-color: #059669;
        }
        .provider-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        .provider-header h4 {
            margin: 0;
            font-size: 18px;
            color: #374151;
        }
        .provider-icon {
            font-size: 32px;
            margin-right: 12px;
        }
        .provider-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .provider-badge.free {
            background: #d1fae5;
            color: #065f46;
        }
        .provider-badge.premium {
            background: #ddd6fe;
            color: #5b21b6;
        }
        .provider-benefits {
            margin: 16px 0;
        }
        .benefit {
            font-size: 14px;
            margin: 6px 0;
            color: #4b5563;
        }
        .provider-cost {
            font-size: 20px;
            font-weight: bold;
            color: #1f2937;
            margin: 12px 0 8px 0;
        }
        .provider-desc {
            font-size: 13px;
            color: #6b7280;
            font-style: italic;
        }
        .cost-optimizer-section {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 16px;
            margin: 24px 0;
        }
        .cost-optimizer-section h4 {
            margin: 0 0 8px 0;
            color: #92400e;
        }
        .required {
            color: #ef4444;
        }
        .performance-section {
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            border-radius: 8px;
            padding: 16px;
            margin: 24px 0;
        }
        .performance-section h4 {
            margin: 0 0 8px 0;
            color: #0c4a6e;
        }
    </style>
</head>
<body>
    <div class="wizard-container">
        <div class="wizard-header">
            <h1>üöÄ TicketZero AI Setup Wizard</h1>
            <p>Let's get your AI ticket resolution system up and running!</p>
        </div>
        
        <div class="wizard-content">
            <!-- Step Indicator -->
            <div class="step-indicator">
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-title">Welcome</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-title">System Check</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-title">Configuration</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-title">AI Provider</div>
                </div>
                <div class="step" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-title">Complete</div>
                </div>
            </div>

            <!-- Step 1: Welcome -->
            <div class="step-content active" data-step="1">
                <h2>Welcome to TicketZero AI! üéâ</h2>
                <p>You're about to set up the world's first AI system that actually <strong>fixes</strong> tickets instead of just routing them.</p>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üß†</div>
                        <h3>Local AI Intelligence</h3>
                        <p>Your data never leaves your network</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">‚ö°</div>
                        <h3>Automated Resolution</h3>
                        <p>Actually fixes issues, not just routing</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üí∞</div>
                        <h3>1,847% ROI</h3>
                        <p>Proven cost savings for customers</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üõ°Ô∏è</div>
                        <h3>Enterprise Security</h3>
                        <p>OWASP compliant, audit ready</p>
                    </div>
                </div>
                
                <p><strong>Setup takes just 3-5 minutes.</strong> We'll handle everything automatically!</p>
            </div>

            <!-- Step 2: System Check -->
            <div class="step-content" data-step="2">
                <h2>System Requirements Check üîç</h2>
                <p>Let's make sure your system is ready for TicketZero AI...</p>
                
                <div id="systemChecks">
                    <div class="status-check status-warning">
                        <div class="loading"></div>
                        Checking system requirements...
                    </div>
                </div>
                
                <p class="form-help">Don't worry if something isn't ready - we'll help you fix it automatically!</p>
            </div>

            <!-- Step 3: Configuration -->
            <div class="step-content" data-step="3">
                <h2>Configure Your Preferences ‚öôÔ∏è</h2>
                <p>Let's customize TicketZero AI for your environment:</p>
                
                <div class="form-group">
                    <label class="form-label">Automation Level</label>
                    <select id="automationLevel" class="form-input">
                        <option value="conservative">Conservative - Require approval for all fixes</option>
                        <option value="balanced" selected>Balanced - Auto-fix common issues (Recommended)</option>
                        <option value="aggressive">Aggressive - Auto-fix all confident predictions</option>
                    </select>
                    <div class="form-help">You can change this anytime in settings</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Minimum Confidence Level</label>
                    <input type="range" id="confidenceLevel" min="50" max="95" value="75" class="form-input">
                    <div class="form-help">Current: <span id="confidenceValue">75</span>% - Only fixes above this confidence will be executed automatically</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <input type="checkbox" id="enableLearning" checked class="form-checkbox">
                        Enable Continuous Learning
                    </label>
                    <div class="form-help">Allow the AI to learn from successful resolutions to improve over time</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <input type="checkbox" id="enableNotifications" checked class="form-checkbox">
                        Real-time Notifications
                    </label>
                    <div class="form-help">Get notified when tickets are resolved automatically</div>
                </div>
            </div>

            <!-- Step 4: AI Provider Selection -->
            <div class="step-content" data-step="4">
                <h2>Choose Your AI Provider ü§ñ</h2>
                <p>Select the AI provider that best fits your needs. You can change this anytime!</p>
                
                <div class="provider-grid">
                    <div class="provider-card recommended" data-provider="ollama">
                        <div class="provider-header">
                            <div class="provider-icon">üè†</div>
                            <h4>Local Ollama</h4>
                            <div class="provider-badge free">RECOMMENDED</div>
                        </div>
                        <div class="provider-benefits">
                            <div class="benefit">‚úÖ Zero API costs forever</div>
                            <div class="benefit">‚úÖ Complete data privacy</div>
                            <div class="benefit">‚úÖ Works offline</div>
                            <div class="benefit">‚úÖ No usage limits</div>
                        </div>
                        <div class="provider-cost">FREE</div>
                        <div class="provider-desc">Perfect for most businesses. Runs entirely on your hardware.</div>
                    </div>
                    
                    <div class="provider-card" data-provider="openai">
                        <div class="provider-header">
                            <div class="provider-icon">üß†</div>
                            <h4>OpenAI GPT</h4>
                            <div class="provider-badge premium">PREMIUM</div>
                        </div>
                        <div class="provider-benefits">
                            <div class="benefit">‚úÖ Industry-leading accuracy</div>
                            <div class="benefit">‚úÖ Lightning fast responses</div>
                            <div class="benefit">‚úÖ Handles complex issues</div>
                            <div class="benefit">‚ö†Ô∏è Requires internet + API key</div>
                        </div>
                        <div class="provider-cost">~$10-50/month</div>
                        <div class="provider-desc">Best for high-volume, complex environments.</div>
                    </div>
                    
                    <div class="provider-card" data-provider="anthropic">
                        <div class="provider-header">
                            <div class="provider-icon">üéØ</div>
                            <h4>Anthropic Claude</h4>
                            <div class="provider-badge premium">PREMIUM</div>
                        </div>
                        <div class="provider-benefits">
                            <div class="benefit">‚úÖ Advanced reasoning</div>
                            <div class="benefit">‚úÖ Excellent safety features</div>
                            <div class="benefit">‚úÖ Long context understanding</div>
                            <div class="benefit">‚ö†Ô∏è Requires internet + API key</div>
                        </div>
                        <div class="provider-cost">~$8-40/month</div>
                        <div class="provider-desc">Ideal for complex technical analysis.</div>
                    </div>
                    
                    <div class="provider-card" data-provider="google">
                        <div class="provider-header">
                            <div class="provider-icon">üåü</div>
                            <h4>Google Gemini</h4>
                            <div class="provider-badge premium">PREMIUM</div>
                        </div>
                        <div class="provider-benefits">
                            <div class="benefit">‚úÖ Multimodal capabilities</div>
                            <div class="benefit">‚úÖ Very cost-effective</div>
                            <div class="benefit">‚úÖ Google ecosystem integration</div>
                            <div class="benefit">‚ö†Ô∏è Requires internet + API key</div>
                        </div>
                        <div class="provider-cost">~$5-25/month</div>
                        <div class="provider-desc">Great balance of performance and cost.</div>
                    </div>
                </div>
                
                <div class="form-group" id="api-key-section" style="display:none;">
                    <label class="form-label">API Key <span class="required">*</span></label>
                    <input type="password" class="form-input" id="api_key" placeholder="Enter your API key here">
                    <div class="form-help" id="api-key-help">
                        <strong>How to get your API key:</strong><br>
                        1. Visit the provider's website<br>
                        2. Create an account and billing setup<br>
                        3. Generate an API key<br>
                        4. Paste it here
                    </div>
                </div>
                
                <div class="cost-optimizer-section">
                    <h4>üí∞ Smart Cost Optimization</h4>
                    <label class="form-label">
                        <input type="checkbox" id="enableCostOptimization" checked class="form-checkbox">
                        Enable automatic cost optimization
                    </label>
                    <div class="form-help">
                        Use the cheapest provider for simple tickets, premium providers for complex ones.
                        Can save 40-70% on AI costs!
                    </div>
                </div>
                
                <div class="performance-section">
                    <h4>‚ö° Performance Settings</h4>
                    
                    <div class="form-group">
                        <label class="form-label">Local AI Timeout</label>
                        <select class="form-input" id="ollamaTimeout">
                            <option value="60">1 minute (Fast but may timeout)</option>
                            <option value="120" selected>2 minutes (Recommended)</option>
                            <option value="180">3 minutes (Slower but more reliable)</option>
                            <option value="300">5 minutes (Very patient)</option>
                        </select>
                        <div class="form-help">How long to wait for local AI responses</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Cloud API Timeout</label>
                        <select class="form-input" id="apiTimeout">
                            <option value="15">15 seconds (Fast)</option>
                            <option value="30" selected>30 seconds (Recommended)</option>
                            <option value="60">60 seconds (Patient)</option>
                        </select>
                        <div class="form-help">How long to wait for cloud AI responses</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Retry Attempts</label>
                        <select class="form-input" id="retryAttempts">
                            <option value="1">1 attempt (Fast failure)</option>
                            <option value="2" selected>2 attempts (Recommended)</option>
                            <option value="3">3 attempts (Maximum reliability)</option>
                        </select>
                        <div class="form-help">How many times to retry failed requests</div>
                    </div>
                </div>
                
                <div id="aiSetupStatus" style="display:none;">
                    <div class="status-check status-warning">
                        <div class="loading"></div>
                        Testing AI provider connection...
                    </div>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                
                <p class="form-help">This may take a few minutes for first-time setup. We're downloading and configuring your AI model.</p>
            </div>

            <!-- Step 5: Complete -->
            <div class="step-content" data-step="5">
                <h2>Setup Complete! üéâ</h2>
                <p>Congratulations! TicketZero AI is now ready to revolutionize your IT support.</p>
                
                <div class="status-check status-success">
                    ‚úÖ AI engine initialized and ready
                </div>
                <div class="status-check status-success">
                    ‚úÖ Zoho Desk integration configured
                </div>
                <div class="status-check status-success">
                    ‚úÖ Security compliance verified
                </div>
                <div class="status-check status-success">
                    ‚úÖ Automation rules configured
                </div>
                
                <h3>What happens next?</h3>
                <ul>
                    <li>‚ú® TicketZero AI will start analyzing new tickets automatically</li>
                    <li>üîç High-confidence issues will be resolved instantly</li>
                    <li>üìä You'll see real-time savings in your dashboard</li>
                    <li>üéØ Watch your support costs plummet!</li>
                </ul>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üìà</div>
                        <h3>Expected Results</h3>
                        <p>85% ticket auto-resolution<br>60% cost reduction</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">‚è±Ô∏è</div>
                        <h3>Average Response</h3>
                        <p>45 seconds vs 20 minutes<br>95% faster resolution</p>
                    </div>
                </div>
            </div>

            <!-- Wizard Actions -->
            <div class="wizard-actions">
                <button class="btn btn-secondary" id="prevBtn" onclick="previousStep()" style="display: none;">Previous</button>
                <button class="btn btn-primary" id="nextBtn" onclick="nextStep()">Get Started</button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 5;
        
        function updateStepIndicator() {
            document.querySelectorAll('.step').forEach((step, index) => {
                const stepNum = index + 1;
                step.classList.remove('active', 'completed');
                
                if (stepNum < currentStep) {
                    step.classList.add('completed');
                } else if (stepNum === currentStep) {
                    step.classList.add('active');
                }
            });
        }
        
        function updateStepContent() {
            document.querySelectorAll('.step-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelector(`[data-step="${currentStep}"]`).classList.add('active');
        }
        
        function updateButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.style.display = currentStep > 1 ? 'block' : 'none';
            
            if (currentStep === totalSteps) {
                nextBtn.textContent = 'Start Using TicketZero AI';
                nextBtn.onclick = completeSetup;
            } else if (currentStep === 4) {
                nextBtn.textContent = 'Setup AI Engine';
                nextBtn.onclick = setupAI;
            } else {
                nextBtn.textContent = 'Next';
                nextBtn.onclick = nextStep;
            }
        }
        
        function nextStep() {
            if (currentStep < totalSteps) {
                if (currentStep === 2) {
                    runSystemCheck();
                } else {
                    currentStep++;
                    updateStepIndicator();
                    updateStepContent();
                    updateButtons();
                }
            }
        }
        
        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStepIndicator();
                updateStepContent();
                updateButtons();
            }
        }
        
        async function runSystemCheck() {
            const checksContainer = document.getElementById('systemChecks');
            
            const checks = [
                { name: 'Python 3.8+ installed', delay: 500 },
                { name: 'Internet connectivity', delay: 800 },
                { name: 'Zoho Desk permissions', delay: 1200 },
                { name: 'Local storage available', delay: 1500 },
                { name: 'Security requirements', delay: 1800 }
            ];
            
            checksContainer.innerHTML = '';
            
            for (const check of checks) {
                await new Promise(resolve => setTimeout(resolve, check.delay));
                
                const statusDiv = document.createElement('div');
                statusDiv.className = 'status-check status-success';
                statusDiv.innerHTML = `‚úÖ ${check.name}`;
                checksContainer.appendChild(statusDiv);
            }
            
            setTimeout(() => {
                currentStep++;
                updateStepIndicator();
                updateStepContent();
                updateButtons();
            }, 1000);
        }
        
        async function setupAI() {
            const statusContainer = document.getElementById('aiSetupStatus');
            const progressFill = document.getElementById('progressFill');
            
            const steps = [
                { text: 'Downloading AI model...', progress: 20 },
                { text: 'Configuring security settings...', progress: 40 },
                { text: 'Testing automation engine...', progress: 60 },
                { text: 'Validating system integration...', progress: 80 },
                { text: 'Finalizing configuration...', progress: 100 }
            ];
            
            for (let i = 0; i < steps.length; i++) {
                const step = steps[i];
                
                statusContainer.innerHTML = `
                    <div class="status-check status-warning">
                        <div class="loading"></div>
                        ${step.text}
                    </div>
                `;
                
                progressFill.style.width = step.progress + '%';
                
                await new Promise(resolve => setTimeout(resolve, 1500));
            }
            
            statusContainer.innerHTML = `
                <div class="status-check status-success">
                    ‚úÖ AI engine setup complete!
                </div>
            `;
            
            setTimeout(() => {
                currentStep++;
                updateStepIndicator();
                updateStepContent();
                updateButtons();
            }, 1000);
        }
        
        function completeSetup() {
            // Save configuration
            const config = {
                automationLevel: document.getElementById('automationLevel').value,
                confidenceLevel: document.getElementById('confidenceLevel').value,
                enableLearning: document.getElementById('enableLearning').checked,
                enableNotifications: document.getElementById('enableNotifications').checked,
                setupComplete: true,
                setupDate: new Date().toISOString()
            };
            
            // Store configuration (in real implementation, this would call the API)
            localStorage.setItem('ticketzero_config', JSON.stringify(config));
            
            // Close wizard and redirect to main interface
            alert('Setup complete! TicketZero AI is now active and ready to start resolving tickets automatically.');
            
            // In the real implementation, this would integrate with Zoho's navigation
            window.parent.postMessage({ action: 'setup_complete', config: config }, '*');
        }
        
        // Update confidence level display
        document.getElementById('confidenceLevel').addEventListener('input', function() {
            document.getElementById('confidenceValue').textContent = this.value;
        });
        
        // Initialize
        updateStepIndicator();
        updateButtons();
        
        // Show welcome message after a brief delay
        setTimeout(() => {
            console.log('TicketZero AI Setup Wizard initialized');
        }, 500);
    </script>
</body>
</html>